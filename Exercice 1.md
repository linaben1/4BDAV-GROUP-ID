# Création du schéma

## Question 2

### Créer les relations de la base ci-dessus.

-Création des différentes tables :

Table CLI :

    CREATE TABLE CLI (
    NumCli NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NomCli VARCHAR2(30) NOT NULL,
    Pays VARCHAR2(30) NOT NULL,
    Tel NUMBER(10) NOT NULL,
    Ville VARCHAR2(30) NOT NULL,
    Dept VARCHAR2(30) NOT NULL,
    Nat VARCHAR2(30) NOT NULL );

Table COM :

    CREATE TABLE COM (
    NumCom NUMBER GENERATED  BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NumCli NUMBER,
    CONSTRAINT NumCli FOREIGN KEY (NumCli) REFERENCES CLI(NUMCLI),
    FraisPort NUMBER NOT NULL,
    DateCom DATE,
    Payement VARCHAR2(30) );

Table FOU :

    CREATE TABLE FOU (
    NumFou NUMBER GENERATED  BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NomFou VARCHAR2(30) NOT NULL,
    Pays VARCHAR2(30) NOT NULL,
    Tel NUMBER(10) NOT NULL );
    
Table PRO :

    CREATE TABLE PRO (
    NumPro NUMBER GENERATED  BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NumFou Number,
    CONSTRAINT NumFou FOREIGN KEY (NumFou) References FOU(NUMFOU),
    NomPro VARCHAR2(30) NOT NULL,
    TypePro VARCHAR2(30) NOT NULL,
    PrixUnit NUMBER NOT NULL );

Table DET :

    CREATE TABLE DET (
    NumCom NUMBER,
    CONSTRAINT NumCom FOREIGN KEY (NumCom) References COM(NUMCOM),
    NumPro NUMBER,
    CONSTRAINT NumPro FOREIGN KEY (NumPro) References PRO(NUMPRO),
    Qte NUMBER NOT NULL,
    Remise NUMBER(3) NOT NULL );

## Question 3

### Y a-t-il un ordre à respecter lors de la création de ces tables, si oui lequel ? Pourquoi ?

Il y a bel et bien un ordre à respecter qui est :

* CLI
* COM
* FOU
* PRO
* DET

Cet ordre est nécessaire pour les références, en effet pour créer une clé étrangère provenant d'une autre table il faut faire référence à celle-ci, et si elle n'existe pas on ne peut pas la cibler.

## Question 4

### Vérifier vos créations. Sous SQL*plus, utiliser la commande desc <nomtable>. Insérer un jeu de données cohérent dans vos relations (un ou deux tuples par relation).
    
    SQL> desc CLI
    Name					   Null?    Type
    ----------------------------------------- -------- ----------------------------
    NUMCLI 				          NOT NULL NUMBER
    NOMCLI 				          NOT NULL VARCHAR2(30)
    PAYS					  NOT NULL VARCHAR2(30)
    TEL					  NOT NULL NUMBER(10)
    VILLE					  NOT NULL VARCHAR2(30)
    DEPT					  NOT NULL VARCHAR2(30)
    NAT					  NOT NULL VARCHAR2(30)

    SQL> desc COM
    Name					   Null?    Type
    ----------------------------------------- -------- ----------------------------
    NUMCOM 				          NOT NULL NUMBER
    NUMCLI 			                           NUMBER
    FRAISPORT				  NOT NULL NUMBER
    DATECOM				                   DATE
    PAYEMENT				  NOT NULL VARCHAR2(30)

    SQL> desc FOU
    Name					   Null?    Type
    ----------------------------------------- -------- ----------------------------
    NUMFOU 				          NOT NULL NUMBER
    NOMFOU 				          NOT NULL VARCHAR2(30)
    PAYS					  NOT NULL VARCHAR2(30)
    TEL					  NOT NULL NUMBER(10)
    
    SQL> desc PRO
    Name					   Null?    Type
    ----------------------------------------- -------- ----------------------------
    NUMPRO 				          NOT NULL NUMBER
    NUMFOU 					           NUMBER
    NOMPRO 				          NOT NULL VARCHAR2(30)
    TYPEPRO				          NOT NULL VARCHAR2(30)
    PRIXUNIT				  NOT NULL NUMBER
    
    SQL> desc DET
    Name					   Null?    Type
    ----------------------------------------- -------- ----------------------------
    NUMCOM 					           NUMBER
    NUMPRO 					           NUMBER
    QTE					  NOT NULL NUMBER
    REMISE 				          NOT NULL NUMBER(3)

On rajoute 1 ligne dans chaque table dans l'ordre de création :

    SQL> INSERT INTO CLI (NomCli, Pays, Tel, Ville, Dept, Nat ) VALUES
    ('User', 'France', 0707070707, 'Lyon', 'Auvergne', 'Fr');
    
    1 Row created.
    
    SQL> INSERT INTO COM (NUMCLI, FRAISPORT, DATECOM, PAYEMENT) VALUES
    (1, 50, SYSDATE, 'CARTE');
    
    1 Row created.
    
    SQL> INSERT INTO FOU (NOMFOU, PAYS, TEL) VALUES
    ('Amazon', 'France', 0800847715);
    
    1 Row created.
    
    SQL> INSERT INTO PRO (NUMFOU, NOMPRO, TYPEPRO, PRIXUNIT) VALUES
    (1, 'POCO F3', 'Smartphone', 350);
    
    1 Row created.
    
    SQL> INSERT INTO DET (NUMCOM, NUMPRO, QTE, REMISE) VALUES
    (1, 1, 1, 12.5);
    
    1 Row created.

Et on les affiche :

    SQL> SELECT * FROM CLI;

        NUMCLI NOMCLI			  PAYS
    ---------- ------------------------------ ------------------------------
           TEL VILLE			  DEPT
    ---------- ------------------------------ ------------------------------
    NAT
    ------------------------------
             1 User			  France
     707070707 Lyon 			  Auvergne
    Fr
    
    SQL> SELECT * FROM COM;
    
        NUMCOM     NUMCLI  FRAISPORT DATECOM   PAYEMENT
    ---------- ---------- ---------- --------- ------------------------------
             1	    1	      50 31-MAY-22 Carte
    
    SQL> SELECT * FROM FOU;
    
        NUMFOU NOMFOU			  PAYS
    ---------- ------------------------------ ------------------------------
           TEL
    ----------
             1 Amazon			  France
     800847715
    
    SQL> SELECT * FROM PRO;
    
        NUMPRO     NUMFOU NOMPRO
    ---------- ---------- ------------------------------
    TYPEPRO 			 PRIXUNIT
    ------------------------------ ----------
             1	    1 POCO F3
    Smartphone			      350
    
    SQL> SELECT * FROM DET;
    
        NUMCOM     NUMPRO	     QTE     REMISE
    ---------- ---------- ---------- ----------
             1	    1	       1	 13
    
## Question 5
    
### Vider toutes vos tables. Y a-t-il un ordre à respecter ? Si oui, pourquoi ?
    
Il y a effectivement un ordre à respecter qui est l'inverse de l'ordre de création des tables :

* DET
* PRO
* FOU
* COM
* CLI
    
La raison est la même qu'à la question 3.

Pour supprimer le contenu des tables on utilise la commande "TRUNCATE TABLE nomTable;".
